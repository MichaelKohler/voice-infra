apiVersion: v1
kind: ConfigMap
metadata:
  name: voice-config-template
data:
  config.json.j2: |
    {
      "port": 9000,
      "logfile": "/var/log/voice.log",
      "PROD": "{% if environment == "prod" %}true{% else %}false{% endif %}",
      "DB_ROOT_USER": "{{ mysql_username }}",
      "DB_ROOT_PASS": "{{ mysql_password }}",
      "MYSQLUSER": "{{ mysql_username }}",
      "MYSQLPASS": "{{ mysql_password }}",
      "MYSQLDBNAME": "{{ mysql_dbname }}",
      "MYSQLHOST": "{{ mysql_host }}",
      "MYSQLPORT":  "3306",
      "BUCKET_NAME": "{{ bucket_name }}",
      "BUCKET_LOCATION": "{{ bucket_location }}",
      "ENVIRONMENT": "{{ environment }}",
      "SECRET": "{{ session_secret }}",
      "ADMIN_EMAILS": "",
      "KIBANA_ADMINS": "",
      "BASKET_API_KEY": "{{ basket_api_key }}",
      "REDIS_URL": "redis://redis-master/",
      "KIBANA_URL": "XXX",
      "LAST_DATASET": "",
      "AUTH0": {
        "DOMAIN": "{{ auth0_domain }}",
        "CLIENT_ID": "XXX",
        "CLIENT_SECRET": "XXX"
      }
    }
